<?xml version='1.0' encoding='UTF-8'?>
<synthetic xsi:schemaLocation="http://www.xebialabs.com/deployit/synthetic synthetic.xsd" xmlns="http://www.xebialabs.com/deployit/synthetic" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

	<type type="tosca.Server" extends="configuration.HttpConnection">
		<property name="scriptLocation"
			default="tosca/TestToscaConnection.py" 
			hidden="true" />
		<property name="apiUrl" 
			label="Service URL" 
			default="/DistributionServerService/ManagerService.svc" 
			required="true" />
		<property name="toscaCiClientHome" 
			label="TOSCACIClient Home" 
			description="TOSCACIClient home directory" 
			required="true" 
			hidden="true" 
			default="toscahome"/>	
		<property name="testResultDir" 
			label="Test Results Dir"
			description="Path where test results are stored" 
			required="true" 
			hidden="true" 
			default="resultdir"/>	
    </type>

	<type type="custom.SmtpServer" extends="xlrelease.Configuration">
		<property name="host" />
		<property name="port" 
			kind="integer" />
		<property name="username" 
			required="false" />
		<property name="password" 
			password="true"
			required="false" />
		<property name="fromAddress" />
    </type>
	
	<type type="tosca.executeTestEvent" extends="xlrelease.PythonScript" >
		<property name="iconLocation" 
			default="tosca/tosca.png"
			hidden="true" />
		<property name="taskColor"
			hidden="true"
			default="#2666ae" />
		<property name="toscaServer" 
			category="input" 
			label="Tosca Server" 
			referenced-type="tosca.Server" 
			kind="ci" />
		<property name="smtpServer" 
			category="input" 
			label="SMTP Server" 
			description="SMTP server to use to send test results, mandatory if emailTestResults is checked" 
			referenced-type="custom.SmtpServer" 
			kind="ci" 
			required="false"/>
		<property name="testEvent" 
			category="input" 
			description="Test event to be executed" 
			required="true"/>
		<property name="thresholdPercentage" 
			kind="integer"  
			label="Threshold(in %)" 
			category="input" 
			description="Test Threshold"
			default="80" 
			required="false"/>
		<property name="failTask" 
			kind="boolean" 
			category="input" 
			description="Mark task as failed if any test case fails, if selected will ignore threshold value" 
			required="true"
			default="True"/>		
		<property name="emailTestResults"
			kind="boolean"
			category="input"
			required="true"
			description="If selected will email the test results" />			
		<property name="emailTo"
			category="input" 
			description="Comma separated email addresses"/>
		<property name="subject" 
			category="input" 			
			default="Test Results"/>
		<property name="testCaseStatuses"
			category="output"
			kind="map_string_string"
			required="false"/>
		<property name="passedTestCaseCount"
			category="output"/>
		<property name="failedTestCaseCount"
			category="output"/>
	</type>



</synthetic>
